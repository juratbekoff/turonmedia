// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Ceo {
  id        Int @id @default(autoincrement())
  name      String?
  username  String @unique
  password  String

  role      Role @default(ceo)
  
  permission  Permissions[]
}

model Admin {
  id              Int @id @default(autoincrement())
  name            String?
  username        String 
  password        String

  role            Role @default(admin)

  streams         Stream[]
}


model Stream {
  id              Int @id @default(autoincrement())
  name            String
  adminId         Int?
  newsId          Int?

  stream_url      Int?  @unique @default(autoincrement())

  admin           Admin? @relation(fields: [adminId], references: [id])
  news            News? @relation(fields: [newsId], references: [id])
  views           IPs[]
}


model News {
  id            Int @id @default(autoincrement())
  title         String
  views         Int?
  createdAt     DateTime?
  lastSeen      DateTime?
  viewers       IPs[]

  streams       Stream[]
}

model IPs {
  id          Int @id @default(autoincrement())
  IP          String?
  newsId      Int?
  stream_url  Int?
  
  news        News? @relation(fields: [newsId], references: [id])
  stream      Stream? @relation(fields: [stream_url], references: [stream_url])
}


enum Role {
    user
    employer
    admin
    ceo
} 

enum Permissions {
  dashboard
  news
  category
  widthdraw
}


